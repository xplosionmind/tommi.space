---
date: 2023-09-26T15:20:00+02:00
updated: 2023-10-14T20:49:20+02:00
location: Biblioteca Salaborsa, Bologna
permalink: /ynh-ds3-bkp/
tags:
  - geek/server
  - geek/wip
---
The first step of [[Using Cubbit DS3, or decentralized object storage|my major wholesome migration to decentralized object storage]] has been to host on [Cubbit DS3](https://docs.cubbit.io/getting-started/what-is-cubbit-ds3 'What is Cubbit DS3?') the backups of [[Server|Xplosion Server]] generated by [YunoHost](https://yunohost.org 'What is YunoHost?').

<div class='blue box'>
	TL;DR: I am using s3fs to mount Cubbit S3 storage as an external storage device, and I use a little script that performs a YunoHost backup every night, saving it there.
</div>

## Process

I am not getting into basic things such as creating a bucket on Cubbit and configuring it.

### s3fs

1. Install s3fs: <pre><code>apt install s3fs</pre></code>
2. Save Cubbit DS3 credentials in <pre><code>nvim /etc/passwd-s3fs</pre></code>
3. Create the directory that would be mounted as an external device: <pre><code>mkdir /mnt/backup</pre></code>
4. Run s3fs to link the bucket and the local directory<pre><code>s3fs /mnt/backup -o url=https://s3.cubbit.eu -o endpoint=eu-west-1 -o use_path_request_style -o bucket=backup.tommi.space -o allow_other</pre></code>

## Resources

- [How to mount Object Storage on Cloud Server using s3fs-fuse - UpCloud](https://upcloud.com/resources/tutorials/mount-object-storage-cloud-server-s3fs-fuse)
- [How to Mount s3 bucket on Linux (tested on Centos 7 - XCALLY Motion v2 and Clouditalia S3 Personal Storage) : Manuel Veronesi \\ ICT Consulting \\ Help Desk](https://manuelveronesi.freshdesk.com/support/solutions/articles/19000090670-how-to-mount-s3-bucket-on-linux-tested-on-centos-7-xcally-motion-v2-and-clouditalia-s3-personal-st)
- [Adding an external storage to your server | Yunohost Documentation](https://yunohost.org/en/external_storage#4-mount-the-disk)
