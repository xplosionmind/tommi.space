@forward 'root';
@use 'root' as *;
@forward 'clearfix';
@use 'clearfix';

html {
	scroll-behavior: smooth;
	background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDgwMCA4MDAiPjxwYXRoIGZpbGw9IiNGQ0M5MjAiIGQ9Im0wIDAgODAwIDgwMFY3MDBMMTAwIDB6bTIwMCAwIDYwMCA2MDBWNTAwTDMwMCAwem0yMDAgMCA0MDAgNDAwVjMwMEw1MDAgMHptMjAwIDAgMjAwIDIwMFYxMDBMNzAwIDB6TTAgMjAwbDYwMCA2MDBoMTAwTDAgMTAwem0wIDIwMCA0MDAgNDAwaDEwMEwwIDMwMHptMCAyMDAgMjAwIDIwMGgxMDBMMCA1MDB6bTAgMjAwaDEwMEwwIDcwMHoiLz48L3N2Zz4='), #000;
	cursor: var(--cursor);
}

/* DARK THEME (default) */
body {
	color-scheme: dark;
	background: var(--black-ish);
	color: var(--text);
	overflow-wrap: break-word;
	hyphens: auto;
	font: $regular var(--font-sans);
	transition: $trans;

	--background: var(--black-ish);
	--text: var(--white);
	--deep: var(--dark-blue);
	--link: var(--primary);
	--primary: var(--yellow);
	--secondary: var(--blue);
	--slight: var(--light-blue);
	--internal-link: var(--blue);
	--grey: var(--dark-grey);
	--other-grey: var(--light-grey);
	--transp-text: #FFF4;
	--shadow: 5px 5px 20px #0009, -5px -5px 20px #FFF3CC15; 
	--opposite-shadow: -5px -5px 20px #0001, 5px 5px 20px #FFFC;
	--little-shadow: 4px 4px 15px #0009, -3px -3px 12px #FFF3CC18; 
	--tiny-shadow: 2px 2px 3px #000000EF, -2px -2px 3px #FFF3CC22;
	--tool-shadow: 3px 3px 8px #000A, -3px -3px 8px #FFF3CC11;
	--button-shadow: inset 2px 2px 4px #FFF3CC88, inset -2px -2px 4px #0008;
	--inner-shadow: inset 3px 3px 5px #0008, inset -3px -3px 5px #FFF3CC22;
	--inner-little-shadow: inset 2px 2px 4px #0008, inset -2px -2px 3px #FFF3CC11;
}

/* LIGHT THEME */
@media screen and (prefers-color-scheme: light) {
	body {
		color-scheme: light;
		--background: #FFF;
		background: var(--background);
		--text: var(--black-ish);
		--deep: #FFF;
		--link: var(--primary);
		--primary: var(--red);
		--secondary: var(--blue);
		--slight: var(--dark-blue);
		--grey: var(--light-grey);
		--other-grey: var(--dark-grey);
		--transp-text: #11305B33;
		--shadow: 5px 5px 20px #11305B22, -5px -5px 20px #FFF3CC22;
		--opposite-shadow: -5px -5px 20px #0006, 5px 5px 20px #FFF3;
		--little-shadow: 4px 4px 15px #11305B10, -3px -3px 10px #FFF3CC22;
		--tiny-shadow: 1px 1px 4px #11305B33, -2px -2px 3px #FFF3CC77;
		--inner-shadow: inset 3px 3px 5px #11305B55, inset -3px -3px 5px #FFF3CC22;
		--inner-little-shadow: inset 2px 2px 3px #11305B22, inset -2px -2px 3px #FFF3CC33;
	}
	.dark {
		filter: var(--invert-dark);
		box-shadow: var(--opposite-shadow);
	}
}

@media screen and (prefers-color-scheme: dark) {
	.light {
		filter: var(--invert);
		box-shadow: var(--opposite-shadow);
	}
}

/** Layout **/

/*** Layout > global ***/

.cantiere {
	margin: 3vw 3vw 10rem;
	border-radius: $radius-l;
	box-shadow: 5px 5px 2.5vw #000C;
}

* {
	transition: $trans, transform $trans-quick, box-shadow $trans-quick, text-shadow $trans-quick, border $trans-quick, grid-template-rows $trans;
	scrollbar-color: var(--red) transparent;
}

/*** Layout > elements ***/

main {
	position: relative;
}

article {
	position: relative;
	font-size: $regular-more;
	margin: $big 5vw;
	> .box {
		margin: $bigger 0;
	}
}

a {
	text-decoration: none;
	color: var(--link);
	&:hover,
	&:focus {
		box-shadow: none;
		text-shadow: none;
	}
	p &,
	li & {
		font-weight: 500;
		&:hover,
		&:focus {
			margin-bottom: -2px;
			border-bottom: 2px solid inherit;
		}
		&[href^='/'],
		&[href^='#'],
		&[href^='https://tommi.space' i] {
			color: var(--internal-link);
			&::after {
				height: 0%;
			}
		}
	}
	&.box,
	.box {
		&:hover {
			box-shadow: none !important;
		}
		&:active {
			box-shadow: var(--inner-shadow);
		}
	}
}

a,
button,
.button,
label {
	cursor: var(--cursor-hover);
}

img {
	width: 100%;
	height: auto;
	display: block;
	border-radius: $radius-l;
}

figure {
	margin: 0 auto;
	img {
		box-shadow: var(--shadow);
	}
	& + figure {
		margin-top: $bigger;
	}
	& + figure.column {
		margin: 0 0 0 $big;
		width: calc(50% - 1.6rem);
	}
}

figcaption {
	font: $regular var(--font-serif);
	margin: $regular-less 10% 0;
	color: var(--other-grey);
	text-align: center;
}

audio,
.controlBar {
	width: 100%;
	box-shadow: var(--shadow);
	border-radius: $radius-m;
}

iframe {
	border: none;
}

button {
	margin: 0;
	padding: none;
	border: none;
	background: none;
}

input {
	border: none;
	background: var(--background);
	color: var(--text);
	border-radius: $radius-m;
	padding: $small $regular;
	box-shadow: var(--inner-shadow);
	font-size: $bigger;
	max-width: 100%;
	&::placeholder {
		color: var(--other-grey);
	}
	&:focus,
	&:active,
	&:hover {
		border: solid 2px var(--text);
		outline: none;
	}
	& ~ .button {
		margin-left: $small;
	}
}

footer {
	background: var(--background);
	padding: $big;
	margin: $bigger 3%;
	border-radius: $radius-l;
	box-shadow: var(--shadow);
	text-align: center;
	p a {
		color: var(--primary) !important;
	}
	h4 {
		margin-top: $regular;
		margin-bottom: 0;
	}
	h4 + p {
		margin-top: 0;
	}
	.row {
		justify-content: space-evenly;
	}
}


/* Responsive behavior */
@media only screen and (max-width: 950px) {
	.one,
	.half,
	.one-third,
	.two-thirds {
		width: 100%;
		margin: 0;
	}
	article {
		margin: $regular 3vw;
	}
	section h1 {
		font-size: $height;
	}
	.stuff-logo {
		margin-top: $bigger
	}
	.line {
		width: 20%;
	}
	.grid .box {
		margin: 0 3%;
		height: unset;
	}
	.tool {
		bottom: 3vh;
	}
	.popup {
		left: 5vw;
	}
	.newsletter {
		margin: 2vh 0;
	}
	#intro {
		p {
			margin: $regular-less 3vw;
		}
	}
	/*#goto div {
		display: flex;
		overflow-x: scroll;
		-ms-overflow-style: none;
		a {
			margin-right: $small;
		}
	}*/
	#help {
		bottom: -15rem;
	}
	.box .column {
		& + .column h2,
		& + .column h3 {
			margin-top: $regular-more;
		}
	}
	#toc,
	/*#goto {
		margin: 5vh 3vw 0;
		&.collapsible-supercontainer .collapsible-container {
			grid-template-rows: 1fr;
		}
	}*/
	#latest-post-sign {
		top: -1rem;
		right: -1rem;
		transform: rotate(6deg);
	}
	.poetry {
		h1 {
			font-size: $bigger;
		}
	}
}

@media only screen and (min-width: 950px) {
	.box .column {
		p,
		li {
			margin: $regular 10%;
		}
	}
	ul.two,
	ol.two {
		columns: 2;
	}
	ul.three,
	ol.three {
		columns: 3;
	}
	#toc {
		h3 {
			text-align: center;
		}
		position: fixed;
		left: 0;
		bottom: 0;
		font-size: $regular-less;
		background: var(--background);
		box-shadow: var(--shadow);
		border-radius: 0 $radius-l 0 0;
		padding: $regular-less;
	}
	.zibaldone {
		box {
			max-width: 25rem;
		}
	}
	/*#goto {
		position: fixed;
		width: 16rem;
		top: 30vh;
		left: -17rem;
		z-index: 8;
		&:hover,
		&:focus {
			left: 0;
		}
		a {
			transform: scale(.85);
			display: block;
		}
	}*/
	#about {
		.flex {
			margin: 0 10%
		}
	}
}
